{"version":3,"sources":["webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?11bf","webpack:///./src/components/Login.vue"],"names":["Login","name","data","showRegister","showLogin","login","username","password","hint","isError","register","methods","extends_default","Object","vuex_esm","loginUser","registerUser","toRegister","this","toLogin","clickRegister","_this","console","log","res1","validateUsername","isValid","res2","validatePassword","then","$router","push","path","catch","msg","clickLogin","_this2","test","components_Login","render","_vm","_h","$createElement","_c","_self","staticClass","_v","on","click","directives","rawName","value","expression","attrs","type","placeholder","domProps","input","$event","target","composing","$set","class","error","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/2.2604c3c3752fed0228f5.js","sourcesContent":["<template>\n  <div class=\"modal-mask\">\n    <div class=\"modal-wrapper\">\n      <div class=\"modal-container\">\n        <div class=\"main\"></div>\n        <div class=\"form\">\n          <h3 @click=\"toRegister\">创建账户</h3>\n          <div v-show=\"showRegister\" class=\"register\">\n            <input\n              type=\"text\"\n              v-model=\"register.username\"\n              placeholder=\"用户名\"\n            />\n            <input\n              type=\"password\"\n              v-model=\"register.password\"\n              placeholder=\"密码\"\n            />\n            <p v-bind:class=\"{ error: register.isError }\">\n              {{ register.hint }}\n            </p>\n            <div class=\"button\" @click=\"clickRegister\">创建账号</div>\n          </div>\n          <h3 @click=\"toLogin\">登录</h3>\n          <div v-show=\"showLogin\" class=\"login\">\n            <input\n              type=\"text\"\n              v-model=\"login.username\"\n              placeholder=\"输入用户名\"\n            />\n            <input\n              type=\"password\"\n              v-model=\"login.password\"\n              placeholder=\"密码\"\n            />\n            <p v-bind:class=\"{ error: login.isError }\">\n              {{ login.hint }}\n            </p>\n            <div class=\"button\" @click=\"clickLogin\">登录</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// 一开始判断是否登陆，接口可以返回isLogin状态\n// import request from \"@/helpers/request\";\n// request(\"/auth\").then(data => {\n//   console.log(data);\n// });\n\n// 封装后可以改成以下样子\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      showRegister: false,\n      showLogin: true,\n      login: {\n        username: \"\",\n        password: \"\",\n        hint: \"请输入用户名和密码\",\n        isError: false\n      },\n      register: {\n        username: \"\",\n        password: \"\",\n        hint: \"创建账号后请记住用户名和密码\",\n        isError: false\n      }\n    };\n  },\n  methods: {\n    ...mapActions({\n      loginUser: \"login\",\n      registerUser: \"register\"\n    }),\n    toRegister() {\n      this.showRegister = true;\n      this.showLogin = false;\n    },\n    toLogin() {\n      this.showRegister = false;\n      this.showLogin = true;\n    },\n    clickRegister() {\n      console.log(\"register...\");\n      let res1 = this.validateUsername(this.register.username);\n      if (!res1.isValid) {\n        this.register.isError = true;\n        this.register.hint = res1.hint;\n        return;\n      }\n      let res2 = this.validatePassword(this.register.password);\n      if (!res2.isValid) {\n        this.register.isError = true;\n        this.register.hint = res2.hint;\n        return;\n      }\n      // console.log(\n      //   \"开始注册, 用户名是：\",\n      //   this.register.username,\n      //   \" 密码是：\",\n      //   this.register.password\n      // );\n      // 利用封装axios的request发送请求\n      // request(\"/auth/register\", \"POST\", {\n      //   username: this.register.username,\n      //   password: this.register.password\n      // }).then(data => {\n      //   console.log(data);\n      // });\n\n      // 封装接口请求之后\n      this.registerUser({\n        username: this.register.username,\n        password: this.register.password\n      })\n        .then(() => {\n          this.register.isError = false;\n          this.register.hint = \"\";\n          this.$router.push({ path: \"/notebooks\" });\n        })\n        .catch(data => {\n          this.register.isError = true;\n          this.register.hint = data.msg;\n        });\n    },\n    clickLogin() {\n      console.log(\"login...\");\n      // 输入判断\n      let res1 = this.validateUsername(this.login.username);\n      if (!res1.isValid) {\n        this.login.isError = true;\n        this.login.hint = res1.hint;\n        return;\n      }\n      let res2 = this.validatePassword(this.login.password);\n      if (!res2.isValid) {\n        this.login.isError = true;\n        this.login.hint = res2.hint;\n        return;\n      }\n      console.log(\n        `start login..., username: ${this.login.username}, password: ${this.login.password}`\n      );\n      // 利用封装axios的request发送请求\n      // request(\"auth/login\", \"POST\", {\n      //   username: this.login.username,\n      //   password: this.login.password\n      // }).then(data => {\n      //   console.log(data);\n      // });\n\n      // 封装接口请求之后\n      this.loginUser({\n        username: this.login.username,\n        password: this.login.password\n      })\n        .then(() => {\n          this.login.isError = false;\n          this.login.hint = \"\";\n          this.$router.push({ path: \"notebooks\" });\n        })\n        .catch(data => {\n          this.login.isError = true;\n          this.login.hint = data.msg;\n        });\n    },\n    validateUsername(username) {\n      // 用户名可能包含中文，大小写字母，和数字\n      return {\n        isValid: /^[\\u4e00-\\u9fa5a-zA-Z0-9]{3,12}$/.test(username),\n        hint: \"用户名必须是3～12个字符，限于字母数字中文\"\n      };\n    },\n    validatePassword(password) {\n      // return {\n      //   isValid: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[^]{6,16}$/.test(password),\n      //   hint:\n      //     \"密码必须是6～16个字符，至少1个大写字母，1个小写字母和1个数字，其他可以是任意字符\"\n      // };\n      return {\n        isValid: /^.{6,16}$/.test(password),\n        hint: \"密码长度为6～16个字符\"\n      };\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 100;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: table;\n  transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.modal-container {\n  width: 800px;\n  height: 500px;\n  margin: 0px auto;\n  background-color: #fff;\n  border-radius: 2px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n  transition: all 0.3s ease;\n  font-family: Helvetica, Arial, sans-serif;\n  display: flex;\n\n  .main {\n    flex: 1;\n    background: #36bc64\n      url(//cloud.hunger-valley.com/17-12-13/38476998.jpg-middle) center center\n      no-repeat;\n    background-size: contain;\n  }\n\n  .form {\n    width: 270px;\n    border-left: 1px solid #ccc;\n  }\n\n  h3 {\n    padding: 10px 20px;\n    font-weight: normal;\n    font-size: 16px;\n    border-top: 1px solid #eee;\n    cursor: pointer;\n\n    &:nth-of-type(2) {\n      border-bottom: 1px solid #eee;\n    }\n  }\n\n  .button {\n    background-color: #2bb964;\n    height: 36px;\n    line-height: 36px;\n    text-align: center;\n    font-weight: bold;\n    color: #fff;\n    border-radius: 4px;\n    margin-top: 18px;\n    cursor: pointer;\n  }\n\n  .login,\n  .register {\n    padding: 10px 20px;\n    border-top: 1px solid #eee;\n\n    input {\n      display: block;\n      width: 100%;\n      height: 35px;\n      line-height: 35px;\n      padding: 0 6px;\n      border-radius: 4px;\n      border: 1px solid #ccc;\n      outline: none;\n      font-size: 14px;\n      margin-top: 10px;\n    }\n    input:focus {\n      border: 3px solid #9dcaf8;\n    }\n\n    p {\n      font-size: 12px;\n      margin-top: 10px;\n      color: #444;\n    }\n\n    .error {\n      color: red;\n    }\n\n    .login {\n      border-top: 0;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-mask\"},[_c('div',{staticClass:\"modal-wrapper\"},[_c('div',{staticClass:\"modal-container\"},[_c('div',{staticClass:\"main\"}),_vm._v(\" \"),_c('div',{staticClass:\"form\"},[_c('h3',{on:{\"click\":_vm.toRegister}},[_vm._v(\"创建账户\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showRegister),expression:\"showRegister\"}],staticClass:\"register\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.register.username),expression:\"register.username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"用户名\"},domProps:{\"value\":(_vm.register.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.register, \"username\", $event.target.value)}}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.register.password),expression:\"register.password\"}],attrs:{\"type\":\"password\",\"placeholder\":\"密码\"},domProps:{\"value\":(_vm.register.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.register, \"password\", $event.target.value)}}}),_vm._v(\" \"),_c('p',{class:{ error: _vm.register.isError }},[_vm._v(\"\\n            \"+_vm._s(_vm.register.hint)+\"\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"button\",on:{\"click\":_vm.clickRegister}},[_vm._v(\"创建账号\")])]),_vm._v(\" \"),_c('h3',{on:{\"click\":_vm.toLogin}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showLogin),expression:\"showLogin\"}],staticClass:\"login\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.username),expression:\"login.username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"输入用户名\"},domProps:{\"value\":(_vm.login.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"username\", $event.target.value)}}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.password),expression:\"login.password\"}],attrs:{\"type\":\"password\",\"placeholder\":\"密码\"},domProps:{\"value\":(_vm.login.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"password\", $event.target.value)}}}),_vm._v(\" \"),_c('p',{class:{ error: _vm.login.isError }},[_vm._v(\"\\n            \"+_vm._s(_vm.login.hint)+\"\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"button\",on:{\"click\":_vm.clickLogin}},[_vm._v(\"登录\")])])])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fabbb36c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fabbb36c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fabbb36c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fabbb36c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}